<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ .Title }} | Henrique Oliver</title>
    <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"/>
    <style>
        :root { --dark: #0f172a; --blue: #2563eb; --success: #10b981; }
        body { font-family: 'Segoe UI', sans-serif; line-height: 1.6; color: #334155; background-color: #f8fafc; margin: 0; }
        
        /* Hero Section */
        .hero { background: var(--dark); color: white; padding: 4rem 1rem; text-align: center; border-bottom: 5px solid var(--blue); }
        
        /* Container Principal */
        .content { max-width: 800px; margin: -3rem auto 4rem; padding: 2rem; background: white; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1); position: relative; }
        
        /* T√≠tulos */
        h2 { color: var(--dark); border-left: 5px solid var(--blue); padding-left: 1rem; margin-top: 2.5rem; font-size: 1.5rem; }
        
        /* Formul√°rio de IA */
        .ai-form { background: #f1f5f9; padding: 2rem; border-radius: 8px; margin-top: 3rem; border: 1px solid #e2e8f0; }
        .form-input { width: 100%; padding: 0.8rem; margin-bottom: 1rem; border: 1px solid #cbd5e1; border-radius: 4px; box-sizing: border-box; }
        .btn { background: var(--blue); color: white; padding: 1rem 2rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1rem; transition: background 0.3s; }
        .btn:hover { background: #1d4ed8; }
        .btn:disabled { background: #94a3b8; cursor: wait; }
        
        /* Status Messages */
        #status-msg { margin-top: 1rem; text-align: center; font-weight: bold; display: none; padding: 10px; border-radius: 4px; }
        .success { background-color: #d1fae5; color: #065f46; }
        .error { background-color: #fee2e2; color: #991b1b; }

        .footer { text-align: center; padding: 2rem; color: #64748b; font-size: 0.875rem; }
    </style>
</head>
<body>
    <header class="hero">
        <h1 class="f2 f1-ns mb2">{{ .Title }}</h1>
        <p class="f4-ns f5 white-80 measure-wide center">{{ .Description }}</p>
    </header>

    <main class="content">
        {{ .Content }}

        <div id="contato" class="ai-form">
            <h3 class="f3 mt0 mb3 tc brand-dark">ü§ñ Falar com Agente de IA</h3>
            <p class="tc f6 mb4">Descreva sua necessidade. Minha IA analisar√° e agendar√° o pr√≥ximo passo.</p>
            
            <form id="contactForm">
                <label class="f6 b db mb2">Seu Nome</label>
                <input type="text" id="nome" class="form-input" placeholder="Ex: Dr. Roberto" required>

                <label class="f6 b db mb2">Seu E-mail Corporativo</label>
                <input type="email" id="email" class="form-input" placeholder="contato@empresa.com" required>

                <label class="f6 b db mb2">Como posso ajudar?</label>
                <textarea id="mensagem" class="form-input" rows="4" placeholder="Ex: Preciso auditar processos de licita√ß√£o..." required></textarea>

                <button type="submit" id="submitBtn" class="btn">üöÄ Enviar para An√°lise</button>
            </form>
            <div id="status-msg"></div>
        </div>
    </main>

    <footer class="footer">
        ¬© {{ now.Format "2006" }} Henrique Oliver - CRA Ativo & Python Specialist
    </footer>

    <script>
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('submitBtn');
            const msgDiv = document.getElementById('status-msg');
            const data = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                mensagem: document.getElementById('mensagem').value
            };

            // Efeito de carregamento (Importante para Render Free Tier)
            btn.disabled = true;
            btn.innerText = "‚è≥ A IA est√° processando (pode levar at√© 50s)...";
            msgDiv.style.display = 'none';

            try {
                // Tenta conectar com o Backend (A URL ser√° injetada aqui)
                const response = await fetch('https://agente-consultoria.onrender.com/contato', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.ok) {
                    msgDiv.innerText = "‚úÖ Recebido! Minha IA j√° catalogou sua solicita√ß√£o no Neon.tech.";
                    msgDiv.className = "success";
                    msgDiv.style.display = 'block';
                    document.getElementById('contactForm').reset();
                    btn.innerText = "Enviado com Sucesso";
                } else {
                    throw new Error('Erro na API');
                }
            } catch (error) {
                console.error(error);
                msgDiv.innerText = "‚ö†Ô∏è O Agente est√° dormindo ou offline. Tente novamente em 1 minuto.";
                msgDiv.className = "error";
                msgDiv.style.display = 'block';
                btn.disabled = false;
                btn.innerText = "Tentar Novamente";
            }
        });
    </script>
</body>
</html>
